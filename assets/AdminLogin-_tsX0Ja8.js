import{S as l}from"./sweetalert2.all-bH93S6nv.js";import{_ as f,r as c,o as g,c as w,b as p,a as e,t as v,w as x,j as D,g as u,v as m,F as b,d as k,p as L,k as y}from"./index-9IrnIm9m.js";const S={name:"AdminLogin",components:{},data(){return{title:"ADMIN 管理頁面",isLoading:!1,userData:{username:"",password:""}}},methods:{login(){if(this.userData.username&&this.userData.password){const t="https://vue3-course-api.hexschool.io/v2/admin/signin";this.isLoading=!0,this.$http.post(t,this.userData).then(s=>{if(s.data.success&&s.data.token){const{token:a,expired:n}=s.data;document.cookie=`hexToken=${a}; expires=${new Date(n)}; path=/`,this.$router.replace("/admin/products")}else l.fire({title:"登入失敗",text:"",icon:"error"}),this.isLoading=!1}).catch(s=>{var a,n;(n=(a=s.response)==null?void 0:a.data)!=null&&n.message&&l.fire({title:s.response.data.message,text:"",icon:"error"}),this.isLoading=!1})}}},mounted(){document.cookie=`hexToken=1; expires=${new Date("1999/01/02")}; path=/`}},r=t=>(L("data-v-a1534daa"),t=t(),y(),t),V={class:"header px-5 py-2"},I={class:"mt-3"},N=r(()=>e("hr",null,null,-1)),T={class:"container"},A={class:"row justify-content-center"},B=r(()=>e("h1",{class:"my-3 font-weight-normal fw-bold text-center"},"請先登入",-1)),M={class:"col-8"},j={class:"form-floating mb-3"},q=r(()=>e("label",{for:"username"},"Email address",-1)),C={class:"form-floating"},E=r(()=>e("label",{for:"password"},"Password",-1)),F=r(()=>e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1));function P(t,s,a,n,o,d){const h=c("VueLoading"),_=c("RouterLink");return g(),w(b,null,[p(h,{active:o.isLoading},null,8,["active"]),e("div",null,[e("div",V,[e("h1",I,v(o.title),1),p(_,{to:"/"},{default:x(()=>[k("回前台")]),_:1})]),N]),e("div",T,[e("div",A,[B,e("div",M,[e("form",{id:"form",class:"form-signin",onSubmit:s[2]||(s[2]=D((...i)=>d.login&&d.login(...i),["prevent"]))},[e("div",j,[u(e("input",{type:"email",class:"form-control",id:"username",placeholder:"name@example.com",required:"",autofocus:"","onUpdate:modelValue":s[0]||(s[0]=i=>o.userData.username=i)},null,512),[[m,o.userData.username]]),q]),e("div",C,[u(e("input",{type:"password",class:"form-control",id:"password",placeholder:"Password",autocomplete:"false",required:"","onUpdate:modelValue":s[1]||(s[1]=i=>o.userData.password=i)},null,512),[[m,o.userData.password]]),E]),F],32)])])])],64)}const $=f(S,[["render",P],["__scopeId","data-v-a1534daa"]]);export{$ as default};
