import{_ as x,l as L,r,o as c,c as h,b as o,a as s,t as C,w as a,d as t,j as $,h as v,f as m,F as A}from"./index-asqSAOp9.js";import{S as u}from"./sweetalert2.all-eFQV0e_I.js";import{F as V}from"./FooterComponent-AOsZvr3j.js";const p="https://vue3-course-api.hexschool.io/v2",w={name:"AdminLayout",components:{FooterComponent:V},data(){return{title:"ADMIN 管理頁面",isLoading:!0,checkSuccess:!1}},methods:{userCheck(){this.$http.post(`${p}/api/user/check`).then(e=>{this.checkSuccess=!0}).catch(e=>{u.fire({title:e.response.data.message,text:"",icon:"error"}),this.$router.replace("/adminLogin")}).finally(()=>{this.isLoading=!1})},signOut(){this.$http.post(`${p}/logout`).then(e=>{u.fire({title:"登出成功",text:"",icon:"success"}),document.cookie=`hexToken=1; expires=${new Date("1999/01/02")}; path=/`,this.$router.push("/")}).catch(e=>{u.fire({title:e.response.data.message,text:"",icon:"error"})})}},mounted(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");e===""?this.$router.replace("/adminLogin"):(L.defaults.headers.common.Authorization=e,this.userCheck())}},y={class:"header px-5 py-2"},F={class:"mt-3"},S=s("hr",null,null,-1),N={key:0,class:"container"};function R(e,l,B,O,n,d){const _=r("VueLoading"),i=r("RouterLink"),f=r("RouterView"),k=r("FooterComponent");return c(),h(A,null,[o(_,{active:n.isLoading},null,8,["active"]),s("div",null,[s("div",y,[s("h1",F,C(n.title),1),o(i,{to:"/"},{default:a(()=>[t("回前台首頁")]),_:1}),t(" | "),o(i,{to:{name:"AdminProducts"}},{default:a(()=>[t("產品管理")]),_:1}),t(" | "),o(i,{to:{name:"AdminOrders"}},{default:a(()=>[t("訂單管理")]),_:1}),t(" | "),o(i,{to:{name:"AdminCoupons"}},{default:a(()=>[t("優惠卷管理")]),_:1}),t(" | "),s("a",{href:"#",onClick:l[0]||(l[0]=$((...g)=>d.signOut&&d.signOut(...g),["prevent"]))},"登出")]),S]),n.isLoading?m("",!0):(c(),h("div",N,[n.checkSuccess?(c(),v(f,{key:0})):m("",!0)])),o(k)],64)}const M=x(w,[["render",R]]);export{M as default};
